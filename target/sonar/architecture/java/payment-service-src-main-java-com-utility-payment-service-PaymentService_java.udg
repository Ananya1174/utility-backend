
1.0Ananya1174_utility-backendJavaFrontend"1767671988594*java2.B˜1
R
Mpayment-service/src/main/java/com/utility/payment/service/PaymentService.java2
	
type3
	
MAIN4


module-key5

payment-service6

package8
0
+payment-service:com.utility.payment.service9
0
*com.utility.payment.service.PaymentService11

class12

access13

public14


full-range15

(35:1)-(291:2)16

simple-name17

PaymentService18
,
&org.springframework.stereotype.Service20

unknown21

annotated by22


uses23
$
lombok.RequiredArgsConstructor25
7
1com.utility.payment.service.PaymentService.RANDOM27

field28

private29

(39:5)-(39:55)30

RANDOM31
;
5com.utility.payment.service.PaymentService.repository33

(41:5)-(41:48)34


repository35
6
0com.utility.payment.repository.PaymentRepository37

is type38
>
8com.utility.payment.service.PaymentService.billingClient40

(42:5)-(42:47)41

billingClient42
-
'com.utility.payment.feign.BillingClient44
B
<com.utility.payment.service.PaymentService.invoiceRepository46

(43:5)-(43:55)47

invoiceRepository48
6
0com.utility.payment.repository.InvoiceRepository50
?
9com.utility.payment.service.PaymentService.consumerClient52

(44:5)-(44:49)53

consumerClient54
.
(com.utility.payment.feign.ConsumerClient56
?
9com.utility.payment.service.PaymentService.rabbitTemplate58

(45:5)-(45:49)59

rabbitTemplate60
9
3org.springframework.amqp.rabbit.core.RabbitTemplate62
°
öcom.utility.payment.service.PaymentService#initiateOnline(Lcom/utility/payment/dto/InitiateOnlinePaymentRequest;)Lcom/utility/payment/dto/PaymentResponse;64

method65

(47:5)-(104:6)66

initiateOnline67
-
'com.utility.payment.dto.PaymentResponse69

returns70
:
4com.utility.payment.dto.InitiateOnlinePaymentRequest72

	has param73
*
$com.utility.payment.dto.BillResponse75


references76
o
icom.utility.payment.feign.BillingClient#getBill(Ljava/lang/String;)Lcom/utility/payment/dto/BillResponse;78

calls79
U
Ocom.utility.payment.dto.InitiateOnlinePaymentRequest#billId()Ljava/lang/String;81
*
$com.utility.payment.model.BillStatus83
/
)com.utility.payment.model.BillStatus.PAID85
0
*com.utility.payment.exception.ApiException87
)
#org.springframework.http.HttpStatus89
5
/org.springframework.http.HttpStatus.BAD_REQUEST91
g
acom.utility.payment.repository.PaymentRepository#findByBillId(Ljava/lang/String;)Ljava/util/List;93
'
!com.utility.payment.model.Payment95
-
'com.utility.payment.model.PaymentStatus97
5
/com.utility.payment.model.PaymentStatus.SUCCESS99
ü
ócom.utility.payment.repository.PaymentRepository#findByBillIdAndStatus(Ljava/lang/String;Lcom/utility/payment/model/PaymentStatus;)Ljava/util/Optional;101
8
1com.utility.payment.model.PaymentStatus.INITIATED103
Z
Scom.utility.payment.dto.InitiateOnlinePaymentRequest#consumerId()Ljava/lang/String;105
,
%com.utility.payment.model.PaymentMode107
3
,com.utility.payment.model.PaymentMode.ONLINE109
9
2org.springframework.data.repository.CrudRepository111
d
]org.springframework.data.repository.CrudRepository#save(Ljava/lang/Object;)Ljava/lang/Object;113
/
(com.utility.payment.dto.ConsumerResponse115
}
vcom.utility.payment.feign.ConsumerClient#getConsumerById(Ljava/lang/String;)Lcom/utility/payment/dto/ConsumerResponse;117
3
,com.utility.common.dto.event.PaymentOtpEvent119
Ç
{org.springframework.amqp.rabbit.core.RabbitTemplate#convertAndSend(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Object;)V121
0
)com.utility.payment.config.RabbitMQConfig123
9
2com.utility.payment.config.RabbitMQConfig.EXCHANGE125
@
9com.utility.payment.config.RabbitMQConfig.PAYMENT_OTP_KEY127
∫
≤com.utility.payment.dto.PaymentResponse#from(Lcom/utility/payment/model/Payment;Lcom/utility/payment/dto/BillResponse;Ljava/lang/String;)Lcom/utility/payment/dto/PaymentResponse;129
R
Kcom.utility.payment.service.PaymentService#getAllPayments()Ljava/util/List;131

(106:5)-(126:6)132

getAllPayments133
g
`com.utility.payment.repository.PaymentRepository#findAllByOrderByCreatedAtDesc()Ljava/util/List;135
4
-org.springframework.http.HttpStatus.NOT_FOUND137
(
!com.utility.payment.model.Invoice139
o
hcom.utility.payment.repository.InvoiceRepository#findByPaymentId(Ljava/lang/String;)Ljava/util/Optional;141
ì
ãcom.utility.payment.service.PaymentService#confirmOtp(Lcom/utility/payment/dto/ConfirmOtpRequest;)Lcom/utility/payment/dto/PaymentResponse;143

(128:5)-(161:6)144


confirmOtp145
0
)com.utility.payment.dto.ConfirmOtpRequest147
j
corg.springframework.data.repository.CrudRepository#findById(Ljava/lang/Object;)Ljava/util/Optional;149
N
Gcom.utility.payment.dto.ConfirmOtpRequest#paymentId()Ljava/lang/String;151
5
.com.utility.payment.model.PaymentStatus.FAILED153
H
Acom.utility.payment.dto.ConfirmOtpRequest#otp()Ljava/lang/String;155
L
Ecom.utility.payment.feign.BillingClient#markPaid(Ljava/lang/String;)V157
ä
Çcom.utility.payment.service.PaymentService#generateInvoice(Lcom/utility/payment/model/Payment;)Lcom/utility/payment/model/Invoice;159
õ
ìcom.utility.payment.service.PaymentService#offlinePayment(Lcom/utility/payment/dto/OfflinePaymentRequest;)Lcom/utility/payment/dto/PaymentResponse;161

(163:5)-(202:6)162

offlinePayment163
4
-com.utility.payment.dto.OfflinePaymentRequest165
O
Hcom.utility.payment.dto.OfflinePaymentRequest#billId()Ljava/lang/String;167
S
Lcom.utility.payment.dto.OfflinePaymentRequest#consumerId()Ljava/lang/String;169
4
-com.utility.payment.model.PaymentMode.OFFLINE171
P
Icom.utility.payment.dto.OfflinePaymentRequest#remarks()Ljava/lang/String;173
Å
zcom.utility.payment.service.PaymentService#getOutstanding(Ljava/lang/String;)Lcom/utility/payment/dto/OutstandingResponse;175

(204:5)-(219:6)176

getOutstanding177
2
+com.utility.payment.dto.OutstandingResponse179
k
dcom.utility.payment.service.PaymentService#getPaymentsByConsumer(Ljava/lang/String;)Ljava/util/List;181

(221:5)-(244:6)182

getPaymentsByConsumer183
Ä
ycom.utility.payment.repository.PaymentRepository#findByConsumerIdOrderByCreatedAtDesc(Ljava/lang/String;)Ljava/util/List;185
g
`com.utility.payment.service.PaymentService#getPaymentsByBill(Ljava/lang/String;)Ljava/util/List;187

(246:5)-(269:6)188

getPaymentsByBill189

(271:5)-(290:6)190

generateInvoice191J%
#
1
12

3
4

5
6 Z

7
7982


5
68jﬂ
N
32H
323328 *
1)% )(/210:7B$


13
29


15
34


17
35

136
13613721
U
174N
17417565 *
1Ã  Ã(.210:7B&


13
14

15
176

17
177
N
51H
515228 *
1," ,(0210:7B$


13
29


15
53


17
54

24
242521

55
555621

96
969721

154
15415521
U
160N
16016165 *
1£ £(*210:7B&


13
14

15
162

17
163

124
12412521

102
10210321

150
15015121
N
26H
262728 *
1'! '('210:7B$


13
29


15
30


17
31
S
130L
13013165 *
1j" j(0210:7B&


13
14

15
132

17
133

36
363721

156
15615721

112
11211321

49
495021

90
909121

106
10610721
U
158N
15815965 *
1è è($210:7B&


13
29

15
190

17
191

178
17817921

86
868721
N
45H
454628 *
1+% +(6210:7B$


13
29


15
47


17
48

138
13813921

128
12812921

92
929321

170
17017121
N
57H
575828 *
1-" -(0210:7B$


13
29


15
59


17
60

140
14014121

148
14814921

126
12612721

100
10010121

68
686921

82
828321

94
949521

120
12012121

98
989921

166
16616721

118
11811921

168
16816921

108
10810921

110
11011121

84
848521

71
717221
U
142N
14214365 *
1Ä Ä(&210:7B&


13
14

15
144

17
145

146
14614721

104
10410521

122
12212321

19
192021

152
15215321

80
808121

61
616221

116
11611721

184
18418521
U
180N
18018165 *
1›" ›(7210:7B&


13
14

15
182

17
183

74
747521
U
186N
18618765 *
1ˆ" ˆ(3210:7B&


13
14

15
188

17
189
J
10D
101112 *
1% %(:7B$


13
14


15
16


17
18

114
11411521
N
39H
394028 *
1*! *(.210:7B$


13
29


15
41


17
42

88
888921

164
16416521

134
13413521

172
17217321
N
63H
636465 *
1/ /(*210:7B$


13
14


15
66


17
67

43
434421

77
777821r«[

101922*
1# #(	

101923*
1# #(	

102422*
1$ $(

102423*
1$ $(

323638*
1) )($

323623*
1) )($

323623*
1)% )(/

394338*
1* *( 

394323*
1* *( 

394323*
1*! *(.

454938*
1+ +($

454923*
1+ +($

454923*
1+% +(6

515538*
1, ,(!

515523*
1, ,(!

515523*
1," ,(0

576138*
1- -(!

576123*
1- -(!

576123*
1-" -(0

636870*
1/ /(

637173*
1/+ /(G

636823*
1/ /(

637138*
1/H /(O

637123*
1/+ /(G

637438*
11 1(

637423*
11	 1(

637470*
11 1(2

634376*
11 1(2

637779*
11+ 1(2

633976*
11 1(*

634323*
11 1(*

633976*
11 1(*

637176*
113 1(A

638079*
11; 1(A

638223*
13! 3(+

638223*
13, 3(0

638476*
13, 3(0

638679*
14 4(#

638823*
149 4(C

638823*
14D 4(O

639076*
14D 4(O

633676*
17 7(3

639279*
17' 7(3

633276*
17 7(&

633623*
17 7(&

633276*
17 7(&

637176*
174 7(B

638079*
17< 7(B

639438*
18 8(

639623*
18/ 8(<

639623*
18= 8(D

639876*
18= 8(D

639423*
19 9(%

638679*
1? ?(#

638823*
1?= ?(G

638823*
1?H ?(S

639076*
1?H ?(S

639438*
1B B(

639423*
1B	 B(

639470*
1B D(

633676*
1B C('

6310079*
1C C('

633276*
1B B(%

633623*
1B B(%

633276*
1B B(%

637176*
1C( C(6

638079*
1C0 C(6

639623*
1C: C(G

639623*
1CH C(Q

6310276*
1CH C(Q

639438*
1E E(

639423*
1E E(

639479*
1E% E(,

637176*
1F! F(/

638079*
1F) F(/

637176*
1G% G(7

6310479*
1G- G(7

6310623*
1I I(*

6310623*
1I+ I(1

6310876*
1I+ I(1

639623*
1J! J(.

639623*
1J/ J(8

6310276*
1J/ J(8

632676*
1S. S(4

632676*
1S. S(4

639470*
1W	 W(

6311076*
1W	 W(

6311279*
1W W(

633276*
1W	 W(

633623*
1W	 W(

633276*
1W	 W(

6311438*
1Y Y("

6311423*
1Y	 Y(

6311470*
1Z Z(/

635576*
1Z Z(/

6311679*
1Z  Z(/

635176*
1Z Z(

635523*
1Z Z(

635176*
1Z Z(

6311838*
1\ \(

6311823*
1\	 \(

6311879*
1\% \(4

636176*
1a	 a(&

6312079*
1a a(&

635776*
1a	 a(

636123*
1a	 a(

635776*
1a	 a(

6312223*
1b b(

6312476*
1b  b((

6312223*
1c c(

6312676*
1c  c(/

636870*
1g g($

636876*
1g g($

6312879*
1g  g($

636823*
1g g(

1306823*
1j j( 

1309423*
1l l(

1303676*
1l" l(J

13013479*
1l- l(J

1303276*
1l" l(,

1303623*
1l" l(,

1303276*
1l" l(,

1308679*
1o o(#

1308823*
1o9 o(C

1308823*
1oD o(M

13013676*
1oD o(M

1309438*
1r& r(-

1307438*
1s s(

1307423*
1s s(

1307470*
1s! s(6

1304376*
1s! s(6

1307779*
1s/ s(6

1303976*
1s! s(.

1304323*
1s! s(.

1303976*
1s! s(.

13013838*
1t t(

13013823*
1t t(

1304976*
1t u(%

13014079*
1u u(%

1304576*
1t t(0

1304923*
1t t(0

1304576*
1t t(0

1306870*
1x x((

1306876*
1x x((

13012879*
1x$ x((

1306823*
1x x(#

1426870*
1Ä Ä(

14214673*
1Ä' Ä(8

1426823*
1Ä Ä(

14214638*
1Ä9 Ä(@

14214623*
1Ä' Ä(8

1429438*
1Ç Ç(

1429423*
1Ç	 Ç(

1429470*
1Ç É(

14211076*
1Ç Ç(.

14214879*
1Ç& Ç(.

1423276*
1Ç Ç(%

1423623*
1Ç Ç(%

1423276*
1Ç Ç(%

14214676*
1Ç/ Ç(@

14215079*
1Ç7 Ç(@

1428679*
1Ñ Ñ()

1428823*
1Ñ? Ñ(I

1428823*
1ÑJ Ñ(S

14213676*
1ÑJ Ñ(S

1429623*
1Ü$ Ü(1

1429623*
1Ü2 Ü(9

1429876*
1Ü2 Ü(9

1428679*
1á á(#

1428823*
1áA á(K

1428823*
1áL á(W

1429076*
1áL á(W

1429623*
1ã ã(,

1429623*
1ã- ã(3

14215276*
1ã- ã(3

1429470*
1å å(

14211076*
1å å(

14211279*
1å å(

1423276*
1å å(

1423623*
1å å(

1423276*
1å å(

1428679*
1ç ç(#

1428823*
1ç3 ç(=

1428823*
1ç> ç(I

1429076*
1ç> ç(I

14214676*
1ê& ê(1

14215479*
1ê. ê(1

1428679*
1ë ë(#

1428823*
1ë3 ë(=

1428823*
1ë> ë(I

1429076*
1ë> ë(I

1429623*
1î î((

1429623*
1î) î(0

1429876*
1î) î(0

1429470*
1ô	 ô(

14211076*
1ô	 ô(

14211279*
1ô ô(

1423276*
1ô	 ô(

1423623*
1ô	 ô(

1423276*
1ô	 ô(

1424376*
1õ	 õ(

14215679*
1õ õ(

1423976*
1õ	 õ(

1424323*
1õ	 õ(

1423976*
1õ	 õ(

14213838*
1ù ù(

14213823*
1ù	 ù(

14213870*
1ù ù(*

1421076*
1ù ù(*

14215879*
1ù ù(*

1427438*
1û û(

1427423*
1û	 û(

1427470*
1û û(2

1424376*
1û û(2

1427779*
1û+ û(2

1423976*
1û û(*

1424323*
1û û(*

1423976*
1û û(*

1426870*
1† †($

1426876*
1† †($

14212879*
1†  †($

1426823*
1† †(

1606870*
1£ £(

16016473*
1£+ £(@

1606823*
1£ £(

16016438*
1£A £(H

16016423*
1£+ £(@

1607438*
1• •(

1607423*
1•	 •(

1607470*
1• •(2

1604376*
1• •(2

1607779*
1•+ •(2

1603976*
1• •(*

1604323*
1• •(*

1603976*
1• •(*

16016476*
1•3 •(A

16016679*
1•; •(A

1608223*
1ß! ß(+

1608223*
1ß, ß(0

1608476*
1ß, ß(0

1608679*
1® ®(#

1608823*
1®9 ®(C

1608823*
1®D ®(O

1609076*
1®D ®(O

1603676*
1´ ´(3

1609279*
1´' ´(3

1603276*
1´ ´(&

1603623*
1´ ´(&

1603276*
1´ ´(&

16016476*
1´4 ´(B

16016679*
1´< ´(B

1609438*
1¨ ¨(

1609623*
1¨/ ¨(<

1609623*
1¨= ¨(D

1609876*
1¨= ¨(D

1609423*
1≠ ≠(%

1608679*
1≥ ≥(#

1608823*
1≥= ≥(G

1608823*
1≥H ≥(S

1609076*
1≥H ≥(S

1604376*
1∂	 ∂(

16015679*
1∂ ∂(

1603976*
1∂	 ∂(

1604323*
1∂	 ∂(

1603976*
1∂	 ∂(

16016476*
1∂  ∂(.

16016679*
1∂( ∂(.

1609438*
1∏ ∏(

1609423*
1∏	 ∏(

1609479*
1∏ ∏(&

16016476*
1π π()

16016679*
1π# π()

16016476*
1∫ ∫(1

16016879*
1∫' ∫(1

16010623*
1º º($

16010623*
1º% º(,

16017076*
1º% º(,

1609623*
1Ω Ω((

1609623*
1Ω) Ω(0

1609876*
1Ω) Ω(0

16016476*
1æ æ(+

16017279*
1æ$ æ(+

1609470*
1≈	 ≈(

16011076*
1≈	 ≈(

16011279*
1≈ ≈(

1603276*
1≈	 ≈(

1603623*
1≈	 ≈(

1603276*
1≈	 ≈(

16013838*
1« «(

16013823*
1«	 «(

16013870*
1« «(*

1601076*
1« «(*

16015879*
1« «(*

1606870*
1… …($

1606876*
1… …($

16012879*
1…  …($

1606823*
1… …(

17417870*
1Ã Ã(

17417823*
1Ã Ã(

1747438*
1Œ Œ(

1747423*
1Œ	 Œ(

1747470*
1Œ Œ(2

1744376*
1Œ Œ(2

1747779*
1Œ+ Œ(2

1743976*
1Œ Œ(*

1744323*
1Œ Œ(*

1743976*
1Œ Œ(*

1743676*
1– –(3

1749279*
1–' –(3

1743276*
1– –(&

1743623*
1– –(&

1743276*
1– –(&

1749438*
1— —(

1749623*
1—/ —(<

1749623*
1—= —(D

1749876*
1—= —(D

1749423*
1“ “(%

1806823*
1› ›( 

1809423*
1ﬂ ﬂ(

1803676*
1‡ ‡(@

18018479*
1‡ ‡(@

1803276*
1‡ ‡(

1803623*
1‡ ‡(

1803276*
1‡ ‡(

1808679*
1„ „(#

1808823*
1Â Â(

1808823*
1Â  Â()

18013676*
1Â  Â()

1809438*
1È& È('

1807438*
1Í Í(

1807423*
1Í Í(

1807470*
1Í! Í(6

1804376*
1Í! Í(6

1807779*
1Í/ Í(6

1803976*
1Í! Í(.

1804323*
1Í! Í(.

1803976*
1Í! Í(.

18013838*
1Î Î(

18013823*
1Î Î(

1804976*
1Ï Ï(6

18014079*
1Ï' Ï(6

1804576*
1Ï Ï(&

1804923*
1Ï Ï(&

1804576*
1Ï Ï(&

1806870*
1Ó Ó((

1806876*
1Ó Ó((

18012879*
1Ó$ Ó((

1806823*
1Ó Ó(#

1866823*
1ˆ ˆ( 

1869423*
1¯ ¯(

1863676*
1¯" ¯(9

1869279*
1¯- ¯(9

1863276*
1¯" ¯(,

1863623*
1¯" ¯(,

1863276*
1¯" ¯(,

1868679*
1˚ ˚(#

1868823*
1˝ ˝(

1868823*
1˝  ˝()

18613676*
1˝  ˝()

1867438*
1Å Å(

1867423*
1Å	 Å(

1867470*
1Å Å(2

1864376*
1Å Å(2

1867779*
1Å+ Å(2

1863976*
1Å Å(*

1864323*
1Å Å(*

1863976*
1Å Å(*

1869438*
1É& É('

18613838*
1Ñ Ñ(

18613823*
1Ñ Ñ(

1864976*
1Ö Ö(6

18614079*
1Ö' Ö(6

1864576*
1Ö Ö(&

1864923*
1Ö Ö(&

1864576*
1Ö Ö(&

1866870*
1á á((

1866876*
1á á((

18612879*
1á$ á((

1866823*
1á á(#

15813870*
1è è(

1589473*
1è% è(,

15813823*
1è è(

1589438*
1è- è(4

1589423*
1è% è(,

1587438*
1ë ë(

1587423*
1ë	 ë(

1587470*
1ë ë(2

1584376*
1ë ë(2

1587779*
1ë+ ë(2

1583976*
1ë ë(*

1584323*
1ë ë(*

1583976*
1ë ë(*

15813838*
1ì ì(

15813823*
1ì	 ì(

15813879*
1ì ì(&

15813870*
1° °(&

15811076*
1° °(&

15811279*
1°" °(&

1584576*
1° °(!

1584923*
1° °(!

1584576*
1° °(!