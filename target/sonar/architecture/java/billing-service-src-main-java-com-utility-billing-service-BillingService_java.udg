
1.0Ananya1174_utility-backendJavaFrontend"1767671990917*java2.Bë3
R
Mbilling-service/src/main/java/com/utility/billing/service/BillingService.java2
	
type3
	
MAIN4


module-key5

billing-service6

package8
0
+billing-service:com.utility.billing.service9
0
*com.utility.billing.service.BillingService11

class12

access13

public14


full-range15

(28:1)-(381:2)16

simple-name17

BillingService18

lombok.extern.slf4j.Slf4j20

unknown21

annotated by22


uses23
,
&org.springframework.stereotype.Service25
$
lombok.RequiredArgsConstructor27
?
9com.utility.billing.service.BillingService.billRepository29

field30

private31

(33:5)-(33:49)32

billRepository33
3
-com.utility.billing.repository.BillRepository35

is type36
<
6com.utility.billing.service.BillingService.meterClient38

(34:5)-(34:50)39

meterClient40
2
,com.utility.billing.feign.MeterReadingClient42
?
9com.utility.billing.service.BillingService.slabRepository44

(35:5)-(35:55)45

slabRepository46
9
3com.utility.billing.repository.TariffSlabRepository48
?
9com.utility.billing.service.BillingService.consumerClient50

(36:5)-(36:49)51

consumerClient52
.
(com.utility.billing.feign.ConsumerClient54
C
=com.utility.billing.service.BillingService.billEventPublisher56

(37:5)-(37:57)57

billEventPublisher58
2
,com.utility.billing.event.BillEventPublisher60
A
;com.utility.billing.service.BillingService.connectionClient62

(38:5)-(38:53)63

connectionClient64
0
*com.utility.billing.feign.ConnectionClient66
ç
Ücom.utility.billing.service.BillingService#fetchLatestMeterReading(Ljava/lang/String;)Lcom/utility/billing/feign/MeterReadingResponse;68

method69

(40:5)-(48:6)70

fetchLatestMeterReading71
4
.com.utility.billing.feign.MeterReadingResponse73

returns74
E
?io.github.resilience4j.circuitbreaker.annotation.CircuitBreaker76


references77
Ä
zcom.utility.billing.feign.MeterReadingClient#getLatest(Ljava/lang/String;)Lcom/utility/billing/feign/MeterReadingResponse;79

calls80
ò
ëcom.utility.billing.service.BillingService#meterFallback(Ljava/lang/String;Ljava/lang/Throwable;)Lcom/utility/billing/feign/MeterReadingResponse;82

(50:5)-(60:6)83

meterFallback84
ì
åcom.utility.billing.service.BillingService#generateBill(Lcom/utility/billing/dto/GenerateBillRequest;)Lcom/utility/billing/dto/BillResponse;86

(62:5)-(183:6)87

generateBill88
*
$com.utility.billing.dto.BillResponse90
1
+com.utility.billing.dto.GenerateBillRequest92

	has param93
ò
ëcom.utility.billing.repository.BillRepository#findTopByConnectionIdOrderByBillingYearDescBillingMonthDesc(Ljava/lang/String;)Ljava/util/Optional;95
0
*com.utility.billing.exception.ApiException97
)
#org.springframework.http.HttpStatus99
6
/org.springframework.http.HttpStatus.BAD_REQUEST101
¡
πcom.utility.billing.repository.BillRepository#findByConnectionIdAndBillingMonthAndBillingYearAndStatusNot(Ljava/lang/String;IILcom/utility/billing/model/BillStatus;)Ljava/util/Optional;103
+
$com.utility.billing.model.BillStatus105
0
)com.utility.billing.model.BillStatus.PAID107
;
4com.utility.billing.feign.ConsumerConnectionResponse109
é
Ücom.utility.billing.feign.ConnectionClient#getConnectionById(Ljava/lang/String;)Lcom/utility/billing/feign/ConsumerConnectionResponse;111
+
$com.utility.billing.model.TariffSlab113
µ
≠com.utility.billing.repository.TariffSlabRepository#findByUtilityTypeAndPlanCodeOrderByMinUnitsAsc(Lcom/utility/billing/model/UtilityType;Ljava/lang/String;)Ljava/util/List;115
@
9org.springframework.http.HttpStatus.INTERNAL_SERVER_ERROR117
X
Qcom.utility.billing.service.BillingService#calculateFromSlabs(JLjava/util/List;)D119
%
com.utility.billing.model.Bill121
/
(com.utility.billing.model.BillStatus.DUE123
9
2org.springframework.data.repository.CrudRepository125
d
]org.springframework.data.repository.CrudRepository#save(Ljava/lang/Object;)Ljava/lang/Object;127
y
rcom.utility.billing.service.BillingService#publishEventSafely(Lcom/utility/billing/model/Bill;Ljava/lang/String;)V129
}
vcom.utility.billing.service.BillingService#map(Lcom/utility/billing/model/Bill;)Lcom/utility/billing/dto/BillResponse;131

(185:5)-(217:6)132

publishEventSafely133
1
*com.utility.billing.feign.ConsumerResponse135

xcom.utility.billing.feign.ConsumerClient#getConsumerById(Ljava/lang/String;)Lcom/utility/billing/feign/ConsumerResponse;137
6
/com.utility.common.dto.event.BillGeneratedEvent139
o
hcom.utility.billing.event.BillEventPublisher#publish(Lcom/utility/common/dto/event/BillGeneratedEvent;)V141

(219:5)-(244:6)142

calculateFromSlabs143
S
Lcom.utility.billing.service.BillingService#getOverdueBills()Ljava/util/List;145

(246:5)-(252:6)146

getOverdueBills147
y
rcom.utility.billing.repository.BillRepository#findByStatus(Lcom/utility/billing/model/BillStatus;)Ljava/util/List;149
3
,com.utility.billing.model.BillStatus.OVERDUE151
U
Ncom.utility.billing.service.BillingService#markBillAsPaid(Ljava/lang/String;)V153

(254:5)-(281:6)154

markBillAsPaid155
j
corg.springframework.data.repository.CrudRepository#findById(Ljava/lang/Object;)Ljava/util/Optional;157
4
-org.springframework.http.HttpStatus.NOT_FOUND159
w
pcom.utility.billing.service.BillingService#getBillById(Ljava/lang/String;)Lcom/utility/billing/dto/BillResponse;161

(283:5)-(293:6)162

getBillById163
h
acom.utility.billing.service.BillingService#getBillsByConsumer(Ljava/lang/String;)Ljava/util/List;165

(295:5)-(310:6)166

getBillsByConsumer167
i
bcom.utility.billing.repository.BillRepository#findByConsumerId(Ljava/lang/String;)Ljava/util/List;169
Æ
¶com.utility.billing.service.BillingService#getAllBills(Lcom/utility/billing/model/BillStatus;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/String;)Ljava/util/List;171

(312:5)-(347:6)172

getAllBills173
ô
ëcom.utility.billing.repository.BillRepository#findByConsumerIdAndStatus(Ljava/lang/String;Lcom/utility/billing/model/BillStatus;)Ljava/util/List;175
i
bcom.utility.billing.repository.BillRepository#findByBillingMonthAndBillingYear(II)Ljava/util/List;177
=
6org.springframework.data.repository.ListCrudRepository179
W
Porg.springframework.data.repository.ListCrudRepository#findAll()Ljava/util/List;181
I
Bcom.utility.billing.service.BillingService#getTotalBilledAmount()D183

(349:5)-(356:6)184

getTotalBilledAmount185

(358:5)-(380:6)186


map187J%
#
1
12

3
4

5
6 Z

7
7982


5
68j’
U
164N
16416569 *
1ß ß(1210:7B&


13
14

15
166

17
167

158
15815921

47
474821

94
949521

26
262721

122
12212321

106
10610721
U
144N
14414569 *
1ˆ ˆ(.210:7B&


13
14

15
146

17
147
N
67H
676869 *
1,! ,(8210:7B$


13
14


15
70


17
71

102
10210321

138
13813921

114
11411521

148
14814921
U
182N
18218369 *
1› ›('210:7B&


13
14

15
184

17
185
J
10D
101112 *
1 (:7B$


13
14


15
16


17
18

59
596021
N
28H
282930 *
1!" !(0210:7B$


13
31


15
32


17
33

89
899021

126
12612721

112
11211321
U
152N
15215369 *
1˛ ˛(210:7B&


13
14

15
154

17
155

100
10010121
U
170N
17017169 *
1∏ ∏(*210:7B&


13
14

15
172

17
173

178
17817921
N
61H
616230 *
1&$ &(4210:7B$


13
31


15
63


17
64

176
17617721

19
192021

65
656621

136
13613721

41
414221
U
118N
11811969 *
1€ €(&210:7B&


13
31

15
142

17
143
U
128N
12812969 *
1π π($210:7B&


13
31

15
132

17
133

156
15615721
N
85H
858669 *
1> >(%210:7B$


13
14


15
87


17
88

180
18018121
N
37H
373830 *
1"& "(1210:7B$


13
31


15
39


17
40

108
10810921

120
12012121

104
10410521

150
15015121

124
12412521

140
14014121

34
343521

174
17417521

24
242521

72
727321

78
787921
N
55H
555630 *
1%& %(8210:7B$


13
31


15
57


17
58

75
757621

110
11011121
N
49H
495030 *
1$" $(0210:7B$


13
31


15
51


17
52
N
81H
818269 *
12! 2(.210:7B$


13
14


15
83


17
84

91
919221

96
969721
U
160N
16016169 *
1õ õ($210:7B&


13
14

15
162

17
163

116
11611721

134
13413521

98
989921
N
43H
434430 *
1#( #(6210:7B$


13
31


15
45


17
46

168
16816921

53
535421
U
130N
13013169 *
1Ê Ê(210:7B&


13
31

15
186

17
187r©7

101922*
1 (

101923*
1 (

102422*
1 (	

102423*
1 (	

102622*
1 (

102623*
1 (

283436*
1! !(!

283423*
1! !(!

283423*
1!" !(0

374136*
1" "(%

374123*
1" "(%

374123*
1"& "(1

434736*
1# #('

434723*
1# #('

434723*
1#( #(6

495336*
1$ $(!

495323*
1$ $(!

495323*
1$" $(0

555936*
1% %(%

555923*
1% %(%

555923*
1%& %(8

616536*
1& &(#

616523*
1& &(#

616523*
1&$ &(4

677274*
1, ,( 

677522*
1( +(

677523*
1( ((

677223*
1, ,( 

677274*
1/ /(%

674177*
1/ /(%

677880*
1/ /(%

673777*
1/ /(

674123*
1/ /(

673777*
1/ /(

817274*
12 2( 

817223*
12 2( 

858974*
1> >(

859193*
1>& >(9

858923*
1> >(

859136*
1>: >(A

859123*
1>& >(9

853477*
1A A([

859480*
1A  A([

852877*
1A A(

853423*
1A A(

852877*
1A A(

857274*
1F F((

851077*
1F F((

856780*
1F F((

859680*
1I I(#

859823*
1K K(

859823*
1K  K(+

8510077*
1K  K(+

853477*
1`	 a(M

8510280*
1a a(M

852877*
1`	 `(

853423*
1`	 `(

852877*
1`	 `(

8510423*
1e e(#

8510423*
1e$ e((

8510677*
1e$ e((

859680*
1p p(#

859823*
1r r(

859823*
1r  r(+

8510077*
1r  r(+

8510874*
1w w(3

856577*
1w w(3

8511080*
1w" w(3

856177*
1w w(!

856523*
1w w(!

856177*
1w w(!

859680*
1| |(#

859823*
1~ ~(

859823*
1~  ~(+

8510077*
1~  ~(+

859680*
1Ñ Ñ(#

859823*
1Ü Ü(

859823*
1Ü  Ü(+

8510077*
1Ü  Ü(+

8511223*
1ä ä(

854777*
1ã ã(N

8511480*
1ã  ã(N

854377*
1ã ã(

854723*
1ã ã(

854377*
1ã ã(

859680*
1ë ë(#

859823*
1ì ì(

859823*
1ì  ì(5

8511677*
1ì  ì(5

851077*
1ò ò(#

8511880*
1ò ò(#

8512036*
1ù ù(

8512023*
1ù	 ù(

8512080*
1ù ù(

8510423*
1™ ™("

8510423*
1™# ™(&

8512277*
1™# ™(&

8512036*
1Æ Æ(

8512023*
1Æ	 Æ(

8512074*
1Ø Ø($

8512477*
1Ø Ø($

8512680*
1Ø  Ø($

852877*
1Ø Ø(

853423*
1Ø Ø(

852877*
1Ø Ø(

851077*
1±	 ±(

8512880*
1±	 ±(

858974*
1∂ ∂(

851077*
1∂ ∂(

8513080*
1∂ ∂(

12812093*
1∫ ∫(

12812036*
1∫ ∫(

12812023*
1∫ ∫(

12813436*
1ø ø(

12813474*
1¿ ¿(3

1285377*
1¿ ¿(3

12813680*
1¿$ ¿(3

1284977*
1¿ ¿(#

1285323*
1¿ ¿(#

1284977*
1¿ ¿(#

12813836*
1¬  ¬(%

12813823*
1¬ ¬(

12813880*
1√ √(+

1285977*
1— —('

12814080*
1—  —('

1285577*
1— —(

1285923*
1— —(

1285577*
1— —(

11811223*
1› ›(

11811236*
1„ „(

11811223*
1„ „(

1448923*
1ˆ ˆ(

1443477*
1˜ ¯(

14414880*
1¯ ¯(

1442877*
1˜ ˜(

1443423*
1˜ ˜(

1442877*
1˜ ˜(

14410423*
1¯ ¯()

14410423*
1¯* ¯(1

14415077*
1¯* ¯(1

1441023*
1˙ ˙(

1441077*
1˙ ˙(

15212036*
1Ä Ä(

15212023*
1Ä	 Ä(

15212074*
1Å Ç(%

15212477*
1Å Å((

15215680*
1Å  Å((

1522877*
1Å Å(

1523423*
1Å Å(

1522877*
1Å Å(

1529680*
1É% É(1

1529823*
1Ö) Ö(3

1529823*
1Ö4 Ö(=

15215877*
1Ö4 Ö(=

15210423*
1â! â(+

15210423*
1â, â(0

15210677*
1â, â(0

1529680*
1ä ä(#

1529823*
1å å(

1529823*
1å  å(+

15210077*
1å  å(+

15210423*
1ê ê("

15210423*
1ê# ê('

15210677*
1ê# ê('

15212074*
1ò	 ò(

15212477*
1ò	 ò(

15212680*
1ò ò(

1522877*
1ò	 ò(

1523423*
1ò	 ò(

1522877*
1ò	 ò(

1608974*
1õ õ(

1608923*
1õ õ(

1608974*
1ú ü(

16012477*
1ú ù(

16015680*
1ù ù(

1602877*
1ú ú(

1603423*
1ú ú(

1602877*
1ú ú(

1601023*
1û û(

1601077*
1û û(

1609680*
1† †()

1609823*
1¢! ¢(+

1609823*
1¢, ¢(5

16015877*
1¢, ¢(5

1648923*
1ß ß(

1643477*
1¨ ¨(0

16416880*
1¨  ¨(0

1642877*
1¨ ¨(

1643423*
1¨ ¨(

1642877*
1¨ ¨(

1649680*
1Ø Ø(#

1649823*
1± ±(

1649823*
1±  ±()

16415877*
1±  ±()

1641023*
1µ# µ('

1641077*
1µ# µ('

17010493*
1π π(

1708923*
1∏ ∏(

17010436*
1π π(

17010423*
1π π(

17012023*
1ø ø(

1703477*
1√ √(=

17017480*
1√$ √(=

1702877*
1√ √(#

1703423*
1√ √(#

1702877*
1√ √(#

1703477*
1… …(4

17016880*
1…$ …(4

1702877*
1… …(#

1703423*
1… …(#

1702877*
1… …(#

1703477*
1Œ Œ(0

17014880*
1Œ$ Œ(0

1702877*
1Œ Œ(#

1703423*
1Œ Œ(#

1702877*
1Œ Œ(#

1703477*
1— —(D

17017680*
1—$ —(D

1702877*
1— —(#

1703423*
1— —(#

1702877*
1— —(#

17017877*
1◊ ◊(+

17018080*
1◊$ ◊(+

1702877*
1◊ ◊(#

1703423*
1◊ ◊(#

1702877*
1◊ ◊(#

1701023*
1⁄# ⁄('

1701077*
1⁄# ⁄('

18217877*
1ﬂ ‡(

18218080*
1‡ ‡(

1822877*
1ﬂ ﬂ(

1823423*
1ﬂ ﬂ(

1822877*
1ﬂ ﬂ(

18212023*
1‚ ‚("

1308974*
1Ê Ê(

13012093*
1Ê Ê("

1308923*
1Ê Ê(

13012036*
1Ê# Ê('

13012023*
1Ê Ê("

1308936*
1Ë Ë(

1308923*
1Ë	 Ë(

1308980*
1Ë Ë(*